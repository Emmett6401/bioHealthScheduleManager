# 강사 타입 ENUM 수정 가이드

## 🔍 문제 상황

강사 코드 관리에서 12가지 타입을 추가했지만, 데이터베이스 저장 시 오류 발생:
```
쿼리 실행 오류: (1265, "Data truncated for column 'type' at row 1")
```

**원인**: 데이터베이스의 `instructors` 테이블 `type` 컬럼이 ENUM 타입으로 정의되어 있어, 새로운 값들을 허용하지 않음

## ✅ 해결 방법

### 방법 1: SQL 파일 직접 실행 (추천)

#### 1단계: MySQL 접속
```bash
mysql -u root -p
# 비밀번호 입력
```

#### 2단계: 데이터베이스 선택
```sql
USE kdt_schedule;
```

#### 3단계: ENUM 타입 수정
```sql
ALTER TABLE instructors 
MODIFY COLUMN type ENUM(
    '1. 주강사',
    '2. 보조강사', 
    '3. 멘토',
    '4. 행정지원',
    '5. 외부강사',
    '6. 인턴',
    '7. 방문강사',
    '8. 온라인강사',
    '9. 특별강사',
    '10. 객원강사',
    '11. 수석강사',
    '12. 조교'
) DEFAULT '1. 주강사';
```

#### 4단계: 변경 확인
```sql
SHOW CREATE TABLE instructors;
```

성공하면 다음과 같이 표시됩니다:
```
type enum('1. 주강사','2. 보조강사','3. 멘토','4. 행정지원','5. 외부강사','6. 인턴','7. 방문강사','8. 온라인강사','9. 특별강사','10. 객원강사','11. 수석강사','12. 조교')
```

#### 5단계: MySQL 종료
```sql
exit;
```

### 방법 2: SQL 파일 실행

#### 프로젝트 폴더에서:
```bash
mysql -u root -p kdt_schedule < fix_instructor_type_enum.sql
```

### 방법 3: Python 스크립트 실행 (config.py 설정 필요)

#### 1단계: config.py 설정
```bash
nano pyqt5_app/config.py
```

다음 정보 수정:
```python
DB_CONFIG = {
    'type': 'mysql',
    'host': 'localhost',
    'port': 3306,
    'user': 'root',              # 본인의 MySQL 사용자명
    'password': 'your_password',  # 본인의 MySQL 비밀번호
    'database': 'kdt_schedule',   # 데이터베이스명
    'charset': 'utf8mb4'
}
```

#### 2단계: 스크립트 실행
```bash
python3 fix_instructor_type_enum.py
```

성공 시 출력:
```
============================================================
강사 타입 ENUM 컬럼 수정 시작
============================================================

📝 ENUM 타입 수정 중...
✅ ENUM 타입 수정 완료!

✅ 모든 작업이 완료되었습니다!
```

## 📋 지원되는 12가지 강사 타입

수정 후 다음 타입들을 모두 사용할 수 있습니다:

1. ✅ 1. 주강사
2. ✅ 2. 보조강사
3. ✅ 3. 멘토
4. ✅ 4. 행정지원
5. ✅ 5. 외부강사
6. ✅ 6. 인턴
7. ✅ 7. 방문강사
8. ✅ 8. 온라인강사
9. ✅ 9. 특별강사
10. ✅ 10. 객원강사
11. ✅ 11. 수석강사
12. ✅ 12. 조교

## ✅ 테스트

수정 후 프로그램에서:
1. 강사 코드 관리 탭 열기
2. 새 강사 추가
3. 구분 드롭다운에서 원하는 타입 선택
4. 저장 버튼 클릭
5. ✅ 오류 없이 저장됨!

## 🐛 문제 해결

### 오류: Access denied for user
```bash
# MySQL 사용자 확인
mysql -u root -p

# 비밀번호가 틀린 경우, 올바른 비밀번호 사용
```

### 오류: Table 'instructors' doesn't exist
```bash
# 테이블 생성 필요
mysql -u root -p kdt_schedule < create_tables.sql
```

### 오류: Database 'kdt_schedule' doesn't exist
```sql
-- MySQL에서 데이터베이스 생성
CREATE DATABASE IF NOT EXISTS kdt_schedule 
CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## 📝 주의사항

- ⚠️ 기존 데이터에 영향 없음 (ENUM만 확장)
- ⚠️ 백업 권장 (안전을 위해)
- ⚠️ 실행 중인 프로그램은 재시작 필요

## 🎯 완료 체크리스트

- [ ] MySQL 접속 성공
- [ ] kdt_schedule 데이터베이스 선택
- [ ] ALTER TABLE 쿼리 실행 성공
- [ ] SHOW CREATE TABLE로 변경 확인
- [ ] 프로그램 재시작
- [ ] 12가지 타입 모두 저장 가능 확인

---

**문제가 해결되면 강사 코드 관리가 정상적으로 작동합니다!** ✅
