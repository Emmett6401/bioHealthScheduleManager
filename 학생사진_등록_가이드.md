# 학생 사진 등록 기능 추가 완료! 📷

## ✨ 새로운 기능

**학생 관리 화면에 사진 등록 기능이 추가되었습니다!**

### 주요 기능
- ✅ 학생 사진 업로드 (JPG, PNG, BMP, GIF 지원)
- ✅ 사진 미리보기 (150x180 크기)
- ✅ 사진 삭제 기능
- ✅ 원본 + 썸네일 자동 생성
- ✅ 학생 선택 시 사진 자동 로드

---

## 📥 업데이트 방법

### 1단계: 최신 코드 가져오기
```bash
git pull origin student
```

### 2단계: 데이터베이스 업데이트
```bash
# photo_path 컬럼 추가
python add_photo_column.py
```

**출력 예시:**
```
============================================================
학생 사진 경로 컬럼 추가 스크립트
============================================================

📊 학생 테이블에 사진 경로 컬럼 추가 중...
✅ photo_path 컬럼이 추가되었습니다.
✅ 인덱스가 추가되었습니다.

📋 현재 students 테이블 구조:
  - code: varchar(20)
  - name: varchar(100)
  ...
  - photo_path: varchar(500) (NEW!)

✅ 작업 완료!
```

### 3단계: 애플리케이션 실행
```bash
python main_kdt_full.py
```

---

## 🎯 사용 방법

### 새 학생 등록 시 사진 추가

1. **학생 관리** 탭 열기
2. 학생 정보 입력 (코드, 이름, 휴대폰 필수)
3. 왼쪽 사진 영역에서 **"📷 사진 등록"** 버튼 클릭
4. 사진 파일 선택 (JPG, PNG 등)
5. 미리보기 확인
6. **"추가"** 버튼 클릭하여 학생 정보와 사진 함께 저장

### 기존 학생에 사진 추가

1. 테이블에서 학생 선택 (클릭)
2. 왼쪽에 기존 사진 표시 (있는 경우)
3. **"📷 사진 등록"** 버튼 클릭
4. 새 사진 선택
5. 자동으로 DB에 저장됨

### 사진 변경

1. 학생 선택
2. **"📷 사진 등록"** 버튼으로 새 사진 업로드
3. 기존 사진이 새 사진으로 교체됨

### 사진 삭제

1. 학생 선택
2. **"🗑️ 사진 삭제"** 버튼 클릭
3. 확인 후 사진 제거 (파일은 보관됨)

---

## 📂 사진 저장 위치

사진은 프로젝트 폴더에 자동으로 저장됩니다:

```
bioHealthScheduleManager/
├── student_photos/
│   ├── originals/          # 원본 사진 (고해상도)
│   │   ├── S-001_20251029_143025.jpg
│   │   └── S-002_20251029_143156.jpg
│   └── thumbnails/         # 썸네일 (150x180)
│       ├── S-001_20251029_143025.jpg
│       └── S-002_20251029_143156.jpg
```

### 파일명 규칙
- 형식: `{학생코드}_{날짜시간}.{확장자}`
- 예: `S-001_20251029_143025.jpg`
  - S-001: 학생 코드
  - 20251029: 2025년 10월 29일
  - 143025: 14시 30분 25초

---

## 🎨 UI 디자인

### 화면 구성

```
┌─────────────────────────────────────────────────────────┐
│  학생 정보 등록                                           │
├──────────────┬──────────────────────────────────────────┤
│              │  코드:  [S-001]    이름: [홍길동]         │
│  ┌────────┐  │  성별:  [남자]                           │
│  │        │  │                                          │
│  │  사진  │  │  생년월일: [99.01.12]                    │
│  │        │  │  휴대폰:   [010-1234-5678]               │
│  │        │  │  이메일:   [email@example.com]           │
│  └────────┘  │                                          │
│  [📷 등록]   │  주소: [서울시 ...]                       │
│  [🗑️ 삭제]   │  관심분야: [AI, 로봇]                    │
│              │  최종학교: [우송대학교/3학년]             │
└──────────────┴──────────────────────────────────────────┘
```

---

## 🔧 기술 세부사항

### 이미지 처리
- **원본**: 고품질 보관 (quality=95)
- **썸네일**: 150x180 크기로 자동 변환
- **비율 유지**: 가로세로 비율 유지하며 리사이징
- **배경 추가**: 여백은 흰색 배경으로 채움

### 지원 형식
- PNG (투명 배경 지원)
- JPG/JPEG
- BMP
- GIF

### 데이터베이스
```sql
ALTER TABLE students 
ADD COLUMN photo_path VARCHAR(500) COMMENT '학생 사진 파일 경로';
```

---

## ✅ 테스트 체크리스트

- [ ] `git pull origin student` 성공
- [ ] `python add_photo_column.py` 실행 성공
- [ ] `python main_kdt_full.py` 실행
- [ ] 학생 관리 탭에서 사진 영역 보임
- [ ] "📷 사진 등록" 버튼 작동
- [ ] 사진 선택 후 미리보기 표시
- [ ] 새 학생 추가 시 사진 함께 저장
- [ ] 기존 학생 선택 시 사진 로드
- [ ] 사진 변경 기능 작동
- [ ] "🗑️ 사진 삭제" 버튼 작동

---

## 💡 사용 팁

### 좋은 학생 사진 준비 방법
1. **해상도**: 최소 300x400 픽셀 이상 권장
2. **비율**: 세로가 약간 긴 비율 (증명사진 스타일)
3. **배경**: 밝고 깔끔한 배경
4. **파일 크기**: 5MB 이하 권장

### 대량 사진 등록
1. 사진 파일명을 학생 코드로 준비
   - 예: `S-001.jpg`, `S-002.jpg`
2. 한 명씩 선택하여 등록
3. 또는 엑셀 업로드 시 사진 URL 포함 (향후 기능)

---

## 🐛 문제 해결

### "먼저 학생 코드를 입력하세요" 오류
- **원인**: 코드 입력 없이 사진 등록 시도
- **해결**: 코드 입력 후 사진 등록

### 사진이 표시되지 않음
- **확인 1**: `student_photos` 폴더 존재 확인
- **확인 2**: 파일 경로가 올바른지 확인
- **해결**: 사진을 다시 업로드

### "파일 경로를 찾을 수 없음" 오류
- **원인**: 사진 파일이 이동되거나 삭제됨
- **해결**: 해당 학생에게 사진 다시 등록

---

## 📊 데이터베이스 구조

### students 테이블 (업데이트 후)

| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| code | VARCHAR(20) | 학생 코드 (PK) |
| name | VARCHAR(100) | 이름 |
| birth_date | VARCHAR(50) | 생년월일 |
| gender | VARCHAR(10) | 성별 |
| phone | VARCHAR(20) | 휴대폰 |
| email | VARCHAR(100) | 이메일 |
| address | TEXT | 주소 |
| interests | TEXT | 관심분야 |
| education | TEXT | 최종학교 |
| introduction | TEXT | 자기소개 |
| campus | VARCHAR(100) | 캠퍼스 |
| course_code | VARCHAR(20) | 배정과정 코드 |
| notes | TEXT | 비고 |
| **photo_path** | **VARCHAR(500)** | **사진 경로 (NEW!)** |
| registered_at | TIMESTAMP | 등록일 |

---

## 🎉 완료!

이제 학생 사진을 자유롭게 등록하고 관리할 수 있습니다!

### 다음 단계
1. Windows에서 `git pull origin student`
2. `python add_photo_column.py` 실행
3. `python main_kdt_full.py` 실행
4. 학생 사진 등록 시작! 📷

---

**업데이트 일시**: 2025년 10월 29일  
**기능**: 학생 사진 등록/관리  
**파일**: student_dialog.py, add_photo_column.py  
**상태**: ✅ 준비 완료
